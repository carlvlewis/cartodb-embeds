// @preserve cartodb-embed.js version: 0.1.0
// @preserve CartoDB.js version: 3.15.2 
// @preserve github.com/mhkeller/cartodb-embeds
(function(){var t={init:function(){var t=this,e='<link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />';document.write(e+"<style>.CDBE-embed{margin-bottom:10px;}.CDBE-map-container,.CDBE-inner-wrapper{width:100%;height:100%;}</style>");var o=0,r=document.querySelectorAll(".CDBE-embed");Array.prototype.forEach.call(r,function(e){var r={embedLink:e.getAttribute("data-embed-link"),zoom:+e.getAttribute("data-zoom"),latlng:t.parseLatLngAttr(e.getAttribute("data-latlng")),mobileZoom:+e.getAttribute("data-mobile-zoom"),mobileLatlng:t.parseLatLngAttr(e.getAttribute("data-mobile-latlng")),mobileBreakpoint:parseFloat(e.getAttribute("data-mobile-breakpoint"))},n="mapid_"+o;t[n]={},t[n].outerEl=e,t.bakeLayout(n),t.initCartoDb(n,r),o++})},parseLatLngAttr:function(t){return t=t||"",t&&(t=t.split(",").map(function(t){return+t})),t},bakeLayout:function(t){var e=document.createElement("div");e.setAttribute("class","CDBE-inner-wrapper"),this[t].outerEl.appendChild(e);var o=document.createElement("div");return o.setAttribute("class","CDBE-map-container"),o.setAttribute("id","CDBE-map-container-"+t),e.appendChild(o),this[t].innerEl=e,this[t].mapContainer=o,this},initCartoDb:function(t,e){var o=this;return cartodb.createVis("CDBE-map-container-"+t,e.embedLink).on("done",function(r,n){o.setCartoDbListeners.call(o,t,r,n,e)}).on("error",function(){cartodb.log.log("An error occurred loading CartoDB vis",t)}),this},setCartoDbListeners:function(t,e,o,r){var n=o[1];n.setInteraction(!0);var a=e.getNativeMap(),i=a.getCenter(),l=a.getZoom();console.log("native center",a.getCenter());var c=r.zoom||l,s=r.latlng||i,m=(r.mobileBreakpoint||720,window.innerWidth);m<r.mobileBreakpoint&&(c=r.mobileZoom||c,s=r.mobileLatlng||s,console.log("mobile")),console.log(c,s),a.setView(s,c),n.on("error",function(t){cartodb.log.log("error: "+t)}),this[t].native_map=a}};t.init()}).call(this);